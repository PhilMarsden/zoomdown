{"version":3,"sources":["media/countdown.mp3","workers/letters.worker.ts","workers/numbers.worker.ts","game/actions.ts","game/reducer.ts","hooks/useCountdownGame.ts","hooks/useLocalStorage.ts","game/selectors.ts","components/LetterCard/LetterCard.tsx","components/Selection/Selection.tsx","components/NewGame/NewGame.tsx","hooks/useEventListener.ts","components/BetweenRounds/BetweenRounds.tsx","solvers/lettersSolver.ts","hooks/useLettersDeclaration.ts","hooks/useLettersSolution.ts","hooks/useTimer.ts","hooks/useInterval.ts","components/Timer/Timer.tsx","components/LettersRound/LettersRound.tsx","hooks/useNumbersDeclaration.ts","hooks/useNumbersSelection.ts","hooks/useNumbersSolution.ts","solvers/numbersSolver.ts","components/NumbersRound/NumbersRound.tsx","hooks/useConundrum.ts","components/ConundrumRound/ConundrumRound.tsx","components/Recap/Recap.tsx","components/GameOver/GameOver.tsx","app/App.tsx","serviceWorker.ts","index.tsx"],"names":["module","exports","addMethods","methods","w","Worker","name","setPlayerNames","p1Name","p2Name","type","startGame","variant","reduce","game","createNewGame","action","startLettersRound","drawConsonant","drawVowel","setLettersRoundResult","startNumbersRound","drawLarge","drawSmall","setTarget","setNumbersRoundResult","startConundrumRound","revealConundrum","setP1ConundrumDeclaration","setP2ConundrumDeclaration","solveConundrum","endRound","undefined","rounds","consonantPile","shuffleConsonants","vowelPile","shuffleVowels","largePile","shuffle","newLargePile","smallPile","newSmallPile","newLettersRound","updateLettersRound","updater","slice","length","consonant","round","selection","vowel","p1Declaration","p2Declaration","p1Score","p2Score","maxes","newNumbersRound","updateNumbersRound","large","small","value","target","max","newConundrumRound","updateConundrumRound","scramble","answer","buzzTime","declaration","p1BuzzTime","solved","p2BuzzTime","finished","method","isBadConsonant","letter","includes","pile","frequencies","Object","keys","i","push","newConsonantPile","indicesToSwap","Array","map","_","idx","filter","randomIndex","Math","floor","random","newVowelPile","vowelToIgnore","_items","items","j","useCountdownGame","key","initialValue","useState","item","localStorage","getItem","JSON","parse","storedValue","setStoredValue","valueToStore","Function","setItem","stringify","useLocalStorage","setGame","ROUNDS_9","picker","ROUNDS_15","getCurrentRound","getCurrentRoundDescription","roundIndex","getRoundDescription","getP1TotalScore","p1Scores","r","x","y","getP2TotalScore","p2Scores","getP1CumulativeScore","index","getP2CumulativeScore","getMaxCumulativeScore","maxForLettersRound","maxForNumbersRound","distanceFromTarget","abs","gameOver","numberOfRounds","template","squash","content","transform","LetterCard","className","style","Selection","str","NewGame","dispatch","onChange","e","onClick","useEventListener","eventName","handler","savedHandler","useRef","useEffect","current","eventListener","event","window","addEventListener","removeEventListener","roundSummary","description","BetweenRounds","nextRoundDescription","getNextRoundDescription","startNextRound","keyCode","words","checkValidity","word","lo","hi","mid","useLettersDeclarations","_declaration","_setDeclaration","score","setScore","setDeclaration","isValid","isContainedInSelection","selectionCounts","letterCounts","declarationCounts","every","c","counts","useLettersSolution","validWords","setValidWords","maxLength","setMaxLength","arr","indexOf","addWord","ml","onWordFound","worker","lettersWorker","message","data","findWordsFromSelection","terminate","findAllWordsFromSelection","useTimer","seconds","onExpire","timeRemaining","setTimeRemaining","isRunning","setIsRunning","isExpired","setIsExpired","callback","delay","savedCallback","id","setInterval","clearInterval","useInterval","time","startTimer","resumeTimer","stopTimer","expireTimer","progressBarStyle","remaining","duration","width","Timer","secondsRemaining","durationSeconds","LettersRoundComponent","roundDescription","declarationsSubmitted","setDeclarationsSubmitted","useSound","countdownTheme","startSound","setP1Declaration","setP2Declaration","submitText","submitDeclarations","pickConsonant","countConsonants","pickVowel","countVowels","startRound","repeat","extendSelection","disabled","toUpperCase","trim","join","isVowel","extended","useNumbersDeclarations","valid","_setValid","scoreForDeclaration","setValid","useNumbersSelection","_dispatch","selectedLarges","_setSelectedLarges","selectionHasBeenMade","setSelectedLarges","larges","setTimeout","useNumbersSolution","setMax","addSolution","numbers","onMethodFound","numbersWorker","findNumbersMethods","ConundrumRoundState","NumbersRoundComponent","p1Valid","setP1Valid","p2Valid","setP2Valid","makeSelection","inputKeydown","stopPropagation","tabIndex","onKeyDown","checked","n","toString","randomConundrum","pickRandomConundrumAnswer","decentShuffle","numberOfConundrums","conundrums","singleShuffle","inversions","reverse","ConundrumRoundComponent","initialState","roundState","setRoundState","EXPIRED","pauseSound","pause","setBuzzTime","p1HasDeclared","setP1HasDeclared","p2HasDeclared","setP2HasDeclared","resume","TICKING","incorrect","INCORRECT","expired","SOLVED","buzz","GUESSING","declareForP1","guess","declareForP2","useConundrum","WAITING","showBuzzer","showReveal","emptySelection","incorrectSelection","getSelection","handleP1KeyDown","handleP2KeyDown","Recap","renderRoundRow","title","renderLettersRow","renderNumbersRow","normalizeBuzzTime","renderConundrumRow","roundedBuzzTime","min","toFixed","rd","GameOver","App","gameState","getGameState","Boolean","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console"],"mappings":"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","file":"static/js/main.b9ff0b30.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/countdown.d27402a0.mp3\";","\n\t\t\t\tvar addMethods = require(\"../../node_modules/workerize-loader/dist/rpc-wrapper.js\")\n\t\t\t\tvar methods = [\"findWordsFromSelection\"]\n\t\t\t\tmodule.exports = function() {\n\t\t\t\t\tvar w = new Worker(__webpack_public_path__ + \"0fdb60b708fea5b0cc22.worker.js\", { name: \"[hash].worker.js\" })\n\t\t\t\t\taddMethods(w, methods)\n\t\t\t\t\t\n\t\t\t\t\treturn w\n\t\t\t\t}\n\t\t\t","\n\t\t\t\tvar addMethods = require(\"../../node_modules/workerize-loader/dist/rpc-wrapper.js\")\n\t\t\t\tvar methods = [\"findNumbersMethods\"]\n\t\t\t\tmodule.exports = function() {\n\t\t\t\t\tvar w = new Worker(__webpack_public_path__ + \"6ddaab01775b8499af05.worker.js\", { name: \"[hash].worker.js\" })\n\t\t\t\t\taddMethods(w, methods)\n\t\t\t\t\t\n\t\t\t\t\treturn w\n\t\t\t\t}\n\t\t\t","import { Variant } from './game';\r\n\r\nexport const createNewGame = (): CreateNewGameAction => ({\r\n    type: 'CREATE_NEW_GAME'\r\n});\r\n\r\nexport const setPlayerNames = (p1Name: string, p2Name: string): SetPlayerNamesAction => ({\r\n    type: 'SET_PLAYER_NAMES',\r\n    p1Name, p2Name\r\n});\r\n\r\nexport const startGame = (variant: Variant): StartGameAction => ({\r\n    type: 'START_GAME',\r\n    variant\r\n});\r\n\r\nexport const startLettersRound = (): StartLettersRoundAction => ({\r\n    type: 'START_LETTERS_ROUND'\r\n});\r\n\r\nexport const drawConsonant = (): DrawConsonantAction => ({\r\n    type: 'DRAW_CONSONANT'\r\n});\r\n\r\nexport const drawVowel = (): DrawVowelAction => ({\r\n    type: 'DRAW_VOWEL'\r\n});\r\n\r\nexport const setLettersRoundResult = (p1Declaration: string, p2Declaration: string, p1Score: number, p2Score: number, maxes: string[]): SetLettersRoundResultAction => ({\r\n    type: 'SET_LETTERS_ROUND_RESULT',\r\n    p1Declaration, p2Declaration, p1Score, p2Score, maxes\r\n});\r\n\r\nexport const startNumbersRound = (): StartNumbersRoundAction => ({\r\n    type: 'START_NUMBERS_ROUND'\r\n});\r\n\r\nexport const drawLarge = (): DrawLargeAction => ({\r\n    type: 'DRAW_LARGE'\r\n});\r\n\r\nexport const drawSmall = (): DrawSmallAction => ({\r\n    type: 'DRAW_SMALL'\r\n});\r\n\r\nexport const setTarget = (): SetTargetAction => ({\r\n    type: 'SET_TARGET',\r\n    value: 100 + Math.floor(900 * Math.random())\r\n});\r\n\r\nexport const setNumbersRoundResult = (p1Declaration: number, p2Declaration: number, p1Score: number, p2Score: number, max: {value: number, method: string}): SetNumbersRoundResultAction => ({\r\n    type: 'SET_NUMBERS_ROUND_RESULT',\r\n    p1Declaration, p2Declaration, p1Score, p2Score, max\r\n});\r\n\r\nexport const startConundrumRound = (): StartConundrumRoundAction => ({\r\n    type: 'START_CONUNDRUM_ROUND'\r\n});\r\n\r\nexport const revealConundrum = (scramble: string, answer: string): RevealConundrumAction => ({\r\n    type: 'REVEAL_CONUNDRUM',\r\n    scramble, answer\r\n});\r\n\r\nexport const setP1ConundrumDeclaration = (buzzTime: number, declaration: string): SetP1ConundrumDeclarationAction => ({\r\n    type: 'SET_P1_CONUNDRUM_DECLARATION',\r\n    buzzTime, declaration\r\n});\r\n\r\nexport const setP2ConundrumDeclaration = (buzzTime: number, declaration: string): SetP2ConundrumDeclarationAction => ({\r\n    type: 'SET_P2_CONUNDRUM_DECLARATION',\r\n    buzzTime, declaration\r\n});\r\n\r\nexport const solveConundrum = (): SolveConundrumAction => ({\r\n    type: 'SOLVE_CONUNDRUM'\r\n});\r\n\r\nexport const endRound = (): EndRoundAction => ({\r\n    type: 'END_ROUND'\r\n});\r\n\r\nexport interface CreateNewGameAction {\r\n    type: 'CREATE_NEW_GAME';\r\n}\r\n\r\nexport interface SetPlayerNamesAction {\r\n    type: 'SET_PLAYER_NAMES';\r\n    p1Name: string;\r\n    p2Name: string;\r\n}\r\n\r\nexport interface StartGameAction {\r\n    type: 'START_GAME';\r\n    variant: Variant;\r\n}\r\n\r\nexport interface StartLettersRoundAction {\r\n    type: 'START_LETTERS_ROUND';\r\n}\r\n\r\nexport interface DrawConsonantAction {\r\n    type: 'DRAW_CONSONANT';\r\n}\r\n\r\nexport interface DrawVowelAction {\r\n    type: 'DRAW_VOWEL';\r\n}\r\n\r\nexport interface SetLettersRoundResultAction {\r\n    type: 'SET_LETTERS_ROUND_RESULT';\r\n    p1Declaration: string;\r\n    p2Declaration: string;\r\n    p1Score: number;\r\n    p2Score: number;\r\n    maxes: string[];\r\n}\r\n\r\nexport interface StartNumbersRoundAction {\r\n    type: 'START_NUMBERS_ROUND';\r\n}\r\n\r\nexport interface DrawLargeAction {\r\n    type: 'DRAW_LARGE';\r\n}\r\n\r\nexport interface DrawSmallAction {\r\n    type: 'DRAW_SMALL';\r\n}\r\n\r\nexport interface SetTargetAction {\r\n    type: 'SET_TARGET';\r\n    value: number;\r\n}\r\n\r\nexport interface SetNumbersRoundResultAction {\r\n    type: 'SET_NUMBERS_ROUND_RESULT';\r\n    p1Declaration: number;\r\n    p2Declaration: number;\r\n    p1Score: number;\r\n    p2Score: number;\r\n    max: {value: number, method: string};\r\n}\r\n\r\nexport interface StartConundrumRoundAction {\r\n    type: 'START_CONUNDRUM_ROUND';\r\n}\r\n\r\nexport interface RevealConundrumAction {\r\n    type: 'REVEAL_CONUNDRUM';\r\n    scramble: string;\r\n    answer: string;\r\n}\r\n\r\nexport interface SetP1ConundrumDeclarationAction {\r\n    type: 'SET_P1_CONUNDRUM_DECLARATION';\r\n    buzzTime: number;\r\n    declaration: string;\r\n}\r\n\r\nexport interface SetP2ConundrumDeclarationAction {\r\n    type: 'SET_P2_CONUNDRUM_DECLARATION';\r\n    buzzTime: number;\r\n    declaration: string;\r\n}\r\n\r\nexport interface SolveConundrumAction {\r\n    type: 'SOLVE_CONUNDRUM';\r\n}\r\n\r\nexport interface EndRoundAction {\r\n    type: 'END_ROUND';\r\n}\r\n\r\nexport type CountdownAction = CreateNewGameAction | SetPlayerNamesAction | StartGameAction | StartLettersRoundAction | DrawConsonantAction | DrawVowelAction | SetLettersRoundResultAction | StartNumbersRoundAction | DrawLargeAction | DrawSmallAction | SetTargetAction | SetNumbersRoundResultAction | StartConundrumRoundAction | RevealConundrumAction | SetP1ConundrumDeclarationAction | SetP2ConundrumDeclarationAction | SolveConundrumAction | EndRoundAction;\r\n","import { CountdownGame, LettersRound, NumbersRound, ConundrumRound } from './game'\r\nimport { CountdownAction, StartGameAction, SetPlayerNamesAction, SetLettersRoundResultAction, SetTargetAction, SetNumbersRoundResultAction, RevealConundrumAction, SetP1ConundrumDeclarationAction, SetP2ConundrumDeclarationAction } from './actions'\r\n\r\nexport default function reduce(game: CountdownGame = createNewGame(), action: CountdownAction): CountdownGame {\r\n    switch (action.type) {\r\n        case 'CREATE_NEW_GAME': return createNewGame();\r\n        case 'SET_PLAYER_NAMES': return setPlayerNames(game, action);\r\n        case 'START_GAME': return startGame(game, action);\r\n        case 'START_LETTERS_ROUND': return startLettersRound(game);\r\n        case 'DRAW_CONSONANT': return drawConsonant(game);\r\n        case 'DRAW_VOWEL': return drawVowel(game);\r\n        case 'SET_LETTERS_ROUND_RESULT': return setLettersRoundResult(game, action);\r\n        case 'START_NUMBERS_ROUND': return startNumbersRound(game);\r\n        case 'DRAW_LARGE': return drawLarge(game);\r\n        case 'DRAW_SMALL': return drawSmall(game);\r\n        case 'SET_TARGET': return setTarget(game, action);\r\n        case 'SET_NUMBERS_ROUND_RESULT': return setNumbersRoundResult(game, action);\r\n        case 'START_CONUNDRUM_ROUND': return startConundrumRound(game);\r\n        case 'REVEAL_CONUNDRUM': return revealConundrum(game, action);\r\n        case 'SET_P1_CONUNDRUM_DECLARATION': return setP1ConundrumDeclaration(game, action);\r\n        case 'SET_P2_CONUNDRUM_DECLARATION': return setP2ConundrumDeclaration(game, action);\r\n        case 'SOLVE_CONUNDRUM': return solveConundrum(game);\r\n        case 'END_ROUND': return endRound(game);\r\n        default: return game;\r\n    }\r\n}\r\n\r\nconst createNewGame = (): CountdownGame => ({\r\n    p1Name: 'Player 1',\r\n    p2Name: 'Player 2',\r\n    variant: undefined,\r\n    rounds: [],\r\n    consonantPile: shuffleConsonants(),\r\n    vowelPile: shuffleVowels(),\r\n    largePile: shuffle(newLargePile()),\r\n    smallPile: shuffle(newSmallPile())\r\n});\r\n\r\nconst setPlayerNames = (game: CountdownGame, {p1Name, p2Name}: SetPlayerNamesAction): CountdownGame => ({\r\n    ...game,\r\n    p1Name, p2Name\r\n});\r\n\r\nconst startGame = (game: CountdownGame, {variant}: StartGameAction): CountdownGame => ({\r\n    ...game,\r\n    variant\r\n});\r\n\r\nconst startLettersRound = (game: CountdownGame): CountdownGame => ({\r\n    ...game,\r\n    rounds: [\r\n        ...game.rounds,\r\n        newLettersRound()\r\n    ]\r\n});\r\n\r\nconst updateLettersRound = (game: CountdownGame, updater: (_: LettersRound) => LettersRound): CountdownGame => ({\r\n    ...game,\r\n    rounds: [\r\n        ...game.rounds.slice(0, -1),\r\n        updater(game.rounds[game.rounds.length - 1] as LettersRound)\r\n    ]\r\n});\r\n\r\nconst drawConsonant = (game: CountdownGame): CountdownGame => {\r\n    const consonant = game.consonantPile[0];\r\n    return {\r\n        ...updateLettersRound(game, round => ({\r\n            ...round,\r\n            selection: [...round.selection, consonant]\r\n        })),\r\n        consonantPile: game.consonantPile.slice(1),\r\n    }\r\n};\r\n\r\nconst drawVowel = (game: CountdownGame): CountdownGame => {\r\n    const vowel = game.vowelPile[0];\r\n    return {\r\n        ...updateLettersRound(game, round => ({\r\n            ...round,\r\n            selection: [...round.selection, vowel]\r\n        })),\r\n        vowelPile: game.vowelPile.slice(1),\r\n    };\r\n};\r\n\r\nconst setLettersRoundResult = (game: CountdownGame, {p1Declaration, p2Declaration, p1Score, p2Score, maxes}: SetLettersRoundResultAction): CountdownGame => updateLettersRound(game, round => ({\r\n    ...round,\r\n    p1Declaration, p2Declaration, p1Score, p2Score, maxes\r\n}));\r\n\r\nconst startNumbersRound = (game: CountdownGame): CountdownGame => ({\r\n    ...game,\r\n    rounds: [\r\n        ...game.rounds,\r\n        newNumbersRound()\r\n    ],\r\n    largePile: shuffle(newLargePile()),\r\n    smallPile: shuffle(newSmallPile())\r\n});\r\n\r\nconst updateNumbersRound = (game: CountdownGame, updater: (_: NumbersRound) => NumbersRound): CountdownGame => ({\r\n    ...game,\r\n    rounds: [\r\n        ...game.rounds.slice(0, -1),\r\n        updater(game.rounds[game.rounds.length - 1] as NumbersRound)\r\n    ]\r\n});\r\n\r\nconst drawLarge = (game: CountdownGame): CountdownGame => {\r\n    const large = game.largePile[0];\r\n    return {\r\n        ...updateNumbersRound(game, round => ({\r\n            ...round,\r\n            selection: [large, ...round.selection]\r\n        })),\r\n        largePile: game.largePile.slice(1)\r\n    };\r\n};\r\n\r\nconst drawSmall = (game: CountdownGame): CountdownGame => {\r\n    const small = game.smallPile[0];\r\n    return {\r\n        ...updateNumbersRound(game, round => ({\r\n            ...round,\r\n            selection: [small, ...round.selection]\r\n        })),\r\n        smallPile: game.smallPile.slice(1)\r\n    };\r\n};\r\n\r\nconst setTarget = (game: CountdownGame, {value}: SetTargetAction): CountdownGame => updateNumbersRound(game, round => ({\r\n    ...round,\r\n    target: value\r\n}));\r\n\r\nconst setNumbersRoundResult = (game: CountdownGame, {p1Declaration, p2Declaration, p1Score, p2Score, max}: SetNumbersRoundResultAction): CountdownGame => updateNumbersRound(game, round => ({\r\n    ...round,\r\n    p1Declaration, p2Declaration, p1Score, p2Score, max\r\n}));\r\n\r\nconst startConundrumRound = (game: CountdownGame): CountdownGame => ({\r\n    ...game,\r\n    rounds: [\r\n        ...game.rounds,\r\n        newConundrumRound()\r\n    ]\r\n});\r\n\r\nconst updateConundrumRound = (game: CountdownGame, updater: (_: ConundrumRound) => ConundrumRound): CountdownGame => ({\r\n    ...game,\r\n    rounds: [\r\n        ...game.rounds.slice(0, -1),\r\n        updater(game.rounds[game.rounds.length - 1] as ConundrumRound)\r\n    ]\r\n});\r\n\r\nconst revealConundrum = (game: CountdownGame, {scramble, answer}: RevealConundrumAction): CountdownGame => updateConundrumRound(game, round => ({\r\n    ...round,\r\n    scramble, answer\r\n}));\r\n\r\nconst setP1ConundrumDeclaration = (game: CountdownGame, {buzzTime, declaration}: SetP1ConundrumDeclarationAction): CountdownGame => updateConundrumRound(game, round => ({\r\n    ...round,\r\n    p1BuzzTime: buzzTime,\r\n    p1Declaration: declaration,\r\n    p1Score: declaration === round.answer ? 10 : 0,\r\n    solved: declaration === round.answer\r\n}));\r\n\r\nconst setP2ConundrumDeclaration = (game: CountdownGame, {buzzTime, declaration}: SetP2ConundrumDeclarationAction): CountdownGame => updateConundrumRound(game, round => ({\r\n    ...round,\r\n    p2BuzzTime: buzzTime,\r\n    p2Declaration: declaration,\r\n    p2Score: declaration === round.answer ? 10 : 0,\r\n    solved: declaration === round.answer\r\n}));\r\n\r\nconst solveConundrum = (game: CountdownGame): CountdownGame => updateConundrumRound(game, round => ({\r\n    ...round,\r\n    solved: true\r\n}));\r\n\r\nconst endRound = (game: CountdownGame): CountdownGame => ({\r\n    ...game,\r\n    rounds: [\r\n        ...game.rounds.slice(0, -1),\r\n        {\r\n            ...game.rounds[game.rounds.length - 1],\r\n            finished: true\r\n        }\r\n    ]\r\n});\r\n\r\nconst newLettersRound = (): LettersRound => ({\r\n    type: 'LETTERS',\r\n    selection: [],\r\n    maxes: [],\r\n    finished: false,\r\n    p1Declaration: undefined,\r\n    p2Declaration: undefined,\r\n    p1Score: 0,\r\n    p2Score: 0\r\n});\r\n\r\nconst newNumbersRound = (): NumbersRound => ({\r\n    type: 'NUMBERS',\r\n    selection: [],\r\n    target: 0,\r\n    max: {value: 0, method: ''},\r\n    finished: false,\r\n    p1Declaration: undefined,\r\n    p2Declaration: undefined,\r\n    p1Score: 0,\r\n    p2Score: 0\r\n});\r\n\r\nconst newConundrumRound = (): ConundrumRound => ({\r\n    type: 'CONUNDRUM',\r\n    scramble: undefined,\r\n    answer: undefined,\r\n    solved: false,\r\n    finished: false,\r\n    p1BuzzTime: undefined,\r\n    p2BuzzTime: undefined,\r\n    p1Declaration: undefined,\r\n    p2Declaration: undefined,\r\n    p1Score: 0,\r\n    p2Score: 0\r\n});\r\n\r\nconst newConsonantPile = () => {\r\n    const frequencies: {[s: string]: number} = {'R': 9, 'S': 9, 'T': 9, 'N': 8, 'D': 6, 'L': 5, 'G': 4, 'M': 4, 'P': 4, 'C': 3, 'B': 2, 'F': 2, 'H': 2, 'V': 2, 'W': 2, 'J': 1, 'K': 1, 'Q': 1, 'X': 1, 'Y': 1, 'Z': 1};\r\n    const pile = [];\r\n    for (const letter of Object.keys(frequencies)) {\r\n        for (let i = 0; i < frequencies[letter]; ++i) {\r\n            pile.push(letter);\r\n        }\r\n    }\r\n    return pile;\r\n}\r\n\r\nconst newVowelPile = () => {\r\n    const frequencies: {[s: string]: number} = {'E': 20, 'A': 15, 'I': 13, 'O': 13, 'U': 7};\r\n    const pile = [];\r\n    for (const letter of Object.keys(frequencies)) {\r\n        for (let i = 0; i < frequencies[letter]; ++i) {\r\n            pile.push(letter);\r\n        }\r\n    }\r\n    return pile;\r\n}\r\n\r\nconst newLargePile = () => [100, 75, 50, 25];\r\n\r\nconst newSmallPile = () => [1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10];\r\n\r\nconst isBadConsonant = (letter: string) => ['C', 'B', 'F', 'H', 'V', 'W', 'J', 'K', 'Q', 'X', 'Y', 'Z'].includes(letter);\r\n\r\nconst shuffleConsonants = () => {\r\n    const pile = shuffle(shuffle(newConsonantPile()));\r\n    for (let i = 0; i < pile.length - 2; ++i) {\r\n        if (isBadConsonant(pile[i]) && isBadConsonant(pile[i + 1]) && isBadConsonant(pile[i + 2])) {\r\n            const indicesToSwap = [...Array(pile.length - i - 3)].map((_, idx) => idx + i + 3).filter(idx => !isBadConsonant(pile[idx]));\r\n            if (indicesToSwap.length > 0) {\r\n                const randomIndex = Math.floor(Math.random() * indicesToSwap.length);\r\n                [pile[i + 1], pile[indicesToSwap[randomIndex]]] = [pile[indicesToSwap[randomIndex]], pile[i + 1]];\r\n            }\r\n        }\r\n    }\r\n    return pile;\r\n};\r\n\r\nconst shuffleVowels = () => {\r\n    const pile = shuffle(shuffle(newVowelPile()));\r\n    for (let i = 0; i < pile.length - 3; ++i) {\r\n        if (pile[i] === pile[i + 1] && pile[i + 1] === pile[i + 2]) {\r\n            const vowelToIgnore = pile[i];\r\n            const indicesToSwap = [...Array(pile.length - i - 3)].map((_, idx) => idx + i + 3).filter(idx => pile[idx] !== vowelToIgnore);\r\n            if (indicesToSwap.length > 0) {\r\n                const randomIndex = Math.floor(Math.random() * indicesToSwap.length);\r\n                [pile[i + 1], pile[indicesToSwap[randomIndex]]] = [pile[indicesToSwap[randomIndex]], pile[i + 1]];\r\n            }\r\n        }\r\n    }\r\n    return pile;\r\n};\r\n\r\nconst shuffle = <T>(_items: T[]) => {\r\n    const items = [..._items];\r\n    for (let i = items.length - 1; i > 0; --i) {\r\n        const j = Math.floor(Math.random() * (i + 1));\r\n        [items[i], items[j]] = [items[j], items[i]];\r\n    }\r\n    return items;\r\n}\r\n","import useLocalStorage from './useLocalStorage';\r\nimport { CountdownGame } from '../game/game';\r\nimport { CountdownAction, createNewGame } from '../game/actions';\r\nimport reduce from '../game/reducer';\r\n\r\nexport default function useCountdownGame(): [CountdownGame, (_: CountdownAction) => void] {\r\n    const [game, setGame] = useLocalStorage<CountdownGame>('countdownGame', reduce(undefined, createNewGame()));\r\n    const dispatch = (action: CountdownAction) => setGame(game => reduce(game, action));\r\n    return [game, dispatch];\r\n}\r\n","import { useState } from 'react';\r\n\r\nexport default function useLocalStorage<T>(key: string, initialValue: T): [T, (_: (T | ((_: T) => T))) => void] {\r\n\r\n    const [storedValue, setStoredValue] = useState<T>(() => {\r\n        try {\r\n            const item = localStorage.getItem(key);\r\n            return item ? JSON.parse(item) : initialValue;\r\n        } catch {\r\n            return initialValue;\r\n        }\r\n    });\r\n\r\n    const setValue = (value: T | ((_: T) => T)) => {\r\n        const valueToStore = value instanceof Function ? value(storedValue) : value;\r\n        setStoredValue(valueToStore);\r\n        localStorage.setItem(key, JSON.stringify(valueToStore));\r\n    };\r\n\r\n    return [storedValue, setValue];\r\n}\r\n","import { CountdownGame, Round, LettersRound, NumbersRound } from './game';\r\n\r\nexport type GameState = 'WAITING' | 'BETWEEN' | 'LETTERS' | 'NUMBERS' | 'CONUNDRUM' | 'ENDED';\r\n\r\nexport interface RoundDescription {\r\n    type: 'LETTERS' | 'NUMBERS' | 'CONUNDRUM';\r\n    picker: string | undefined;\r\n}\r\n\r\nconst ROUNDS_9: {type: 'LETTERS' | 'NUMBERS' | 'CONUNDRUM', picker: number | undefined}[] = [\r\n    { type: 'LETTERS', picker: 1 },\r\n    { type: 'LETTERS', picker: 2 },\r\n    { type: 'LETTERS', picker: 1 },\r\n    { type: 'NUMBERS', picker: 2 },\r\n    { type: 'LETTERS', picker: 2 },\r\n    { type: 'LETTERS', picker: 1 },\r\n    { type: 'LETTERS', picker: 2 },\r\n    { type: 'NUMBERS', picker: 1 },\r\n    { type: 'CONUNDRUM', picker: undefined },\r\n];\r\n\r\nconst ROUNDS_15: {type: 'LETTERS' | 'NUMBERS' | 'CONUNDRUM', picker: number | undefined}[] = [\r\n    { type: 'LETTERS', picker: 1 },\r\n    { type: 'LETTERS', picker: 2 },\r\n    { type: 'NUMBERS', picker: 1 },\r\n    { type: 'LETTERS', picker: 2 },\r\n    { type: 'LETTERS', picker: 1 },\r\n    { type: 'NUMBERS', picker: 2 },\r\n    { type: 'LETTERS', picker: 1 },\r\n    { type: 'LETTERS', picker: 2 },\r\n    { type: 'NUMBERS', picker: 1 },\r\n    { type: 'LETTERS', picker: 2 },\r\n    { type: 'LETTERS', picker: 1 },\r\n    { type: 'LETTERS', picker: 2 },\r\n    { type: 'LETTERS', picker: 1 },\r\n    { type: 'NUMBERS', picker: 2 },\r\n    { type: 'CONUNDRUM', picker: undefined },\r\n];\r\n\r\nexport const getGameState = (game: CountdownGame): GameState => {\r\n    if (game.variant === undefined) return 'WAITING';\r\n    else if (game.rounds.length === 0) return 'BETWEEN';\r\n    else if (getCurrentRound(game).finished) return gameOver(game) ? 'ENDED' : 'BETWEEN';\r\n    else return game.rounds[game.rounds.length - 1].type;\r\n};\r\n\r\nexport const getCurrentRound = (game: CountdownGame): Round => {\r\n    return game.rounds[game.rounds.length - 1];\r\n}\r\n\r\nexport const getCurrentRoundDescription = (game: CountdownGame): RoundDescription => {\r\n    const roundIndex = game.rounds.length - 1;\r\n    return getRoundDescription(game, roundIndex);\r\n};\r\n\r\nexport const getNextRoundDescription = (game: CountdownGame): RoundDescription => {\r\n    const roundIndex = game.rounds.length;\r\n    return getRoundDescription(game, roundIndex);\r\n};\r\n\r\nexport const getP1TotalScore = (game: CountdownGame): number => {\r\n    return game.rounds.filter(p1Scores).map(r => r.p1Score).reduce((x, y) => x + y, 0);\r\n}\r\n\r\nexport const getP2TotalScore = (game: CountdownGame): number => {\r\n    return game.rounds.filter(p2Scores).map(r => r.p2Score).reduce((x, y) => x + y, 0);\r\n}\r\n\r\nexport const getP1CumulativeScore = (game: CountdownGame, index: number) => {\r\n    return game.rounds.slice(0, index + 1).filter(p1Scores).map(r => r.p1Score).reduce((x, y) => x + y, 0);\r\n}\r\n\r\nexport const getP2CumulativeScore = (game: CountdownGame, index: number) => {\r\n    return game.rounds.slice(0, index + 1).filter(p2Scores).map(r => r.p2Score).reduce((x, y) => x + y, 0);\r\n}\r\n\r\nexport const getMaxCumulativeScore = (game: CountdownGame, index: number) => {\r\n    const maxForRound = (round: Round) => round.type === 'LETTERS' ? maxForLettersRound(round) : round.type === 'NUMBERS' ? maxForNumbersRound(round) : 10;\r\n    return game.rounds.slice(0, index + 1).map(r => maxForRound(r)).reduce((x, y) => x + y, 0);\r\n}\r\n\r\nconst maxForLettersRound = (round: LettersRound) => round.maxes[0].length === 9 ? 18 : round.maxes[0].length;\r\n\r\nconst maxForNumbersRound = (round: NumbersRound) => {\r\n    const distanceFromTarget = Math.abs(round.target - round.max.value);\r\n    return distanceFromTarget === 0 ? 10 : distanceFromTarget <= 5 ? 7 : distanceFromTarget <= 10 ? 5 : 0;\r\n}\r\n\r\nconst p1Scores = (round: Round): boolean => {\r\n    if (round.type === 'LETTERS' || round.type === 'CONUNDRUM') return round.p1Score >= round.p2Score;\r\n    else if (round.type === 'NUMBERS') return (round.p1Score >= round.p2Score) && (round.p1Score > round.p2Score || Math.abs(round.target - (round.p1Declaration as number)) <= (Math.abs(round.target - (round.p2Declaration as number))));\r\n    return true;\r\n}\r\n\r\nconst p2Scores = (round: Round): boolean => {\r\n    if (round.type === 'LETTERS' || round.type === 'CONUNDRUM') return round.p2Score >= round.p1Score;\r\n    else if (round.type === 'NUMBERS') return (round.p2Score >= round.p1Score) && (round.p2Score > round.p1Score || Math.abs(round.target - (round.p2Declaration as number)) <= (Math.abs(round.target - (round.p1Declaration as number))));\r\n    return true;\r\n}\r\n\r\nconst numberOfRounds = (game: CountdownGame): number => {\r\n    if (game.variant === '9R') return 9;\r\n    else return 15;\r\n}\r\n\r\nconst gameOver = (game: CountdownGame): boolean => {\r\n    if (game.rounds.length >= numberOfRounds(game) && getCurrentRound(game).finished) {\r\n        return getP1TotalScore(game) !== getP2TotalScore(game);\r\n    }\r\n    return false;\r\n};\r\n\r\nconst getRoundDescription = (game: CountdownGame, index: number): RoundDescription => {\r\n    const template = (game.variant === '9R' ? ROUNDS_9[index] : ROUNDS_15[index]) || { type: 'CONUNDRUM', picker: undefined };\r\n    return {\r\n        type: template.type,\r\n        picker: template.picker === 1 ? game.p1Name : template.picker === 2 ? game.p2Name : undefined\r\n    };\r\n};\r\n","import React from 'react';\r\nimport './LetterCard.css';\r\n\r\nexport interface LetterCardProps {\r\n    content: string;\r\n}\r\n\r\nconst LetterCard: React.FC<LetterCardProps> = ({ content }) => {\r\n    return (\r\n        <div className={'letter-card ' + (content.length === 0 ? 'letter-card--empty' : '')}>\r\n            <div style={squash(content)}>{content}</div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst squash = (content: string) => ({\r\n    transform: content.length <= 1 ? 'scaleX(1)' : content.length === 2 ? 'scaleX(0.8)' : 'scaleX(0.6)'\r\n});\r\n\r\nexport default LetterCard;\r\n","import React from 'react';\r\nimport './Selection.css';\r\n\r\nimport LetterCard from '../LetterCard/LetterCard';\r\n\r\nexport interface SelectionProps {\r\n    selection: string[];\r\n}\r\n\r\nconst Selection: React.FC<SelectionProps> = ({ selection }) => {\r\n    return (\r\n        <div className=\"selection\">\r\n            {selection.map((str, idx) =>\r\n                <LetterCard key={idx} content={str}></LetterCard>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Selection;\r\n","import React from 'react';\r\nimport './NewGame.css';\r\n\r\nimport { setPlayerNames, startGame, CountdownAction } from '../../game/actions';\r\nimport { CountdownGame } from '../../game/game';\r\nimport Selection from '../Selection/Selection';\r\n\r\nexport interface NewGameProps {\r\n    game: CountdownGame;\r\n    dispatch: (_: CountdownAction) => void;\r\n}\r\n\r\nconst NewGame: React.FC<NewGameProps> = ({game, dispatch}) => {\r\n    return (\r\n        <div className=\"new-game\">\r\n            <div className=\"game__selection\">\r\n                <Selection selection={['C', 'O', 'U', 'N', 'T', 'D', 'O', 'W', 'N']}></Selection>\r\n            </div>\r\n            <div className=\"new-game__names\">\r\n                <div className=\"new-game__name\">\r\n                    <div className=\"new-game__label\">Player 1 Name</div>\r\n                    <input type=\"text\" value={game.p1Name} onChange={e => dispatch(setPlayerNames(e.target.value, game.p2Name))}></input>\r\n                </div>\r\n                <div className=\"new-game__name\">\r\n                    <div className=\"new-game__label\">Player 2 Name</div>\r\n                    <input type=\"text\" value={game.p2Name} onChange={e => dispatch(setPlayerNames(game.p1Name, e.target.value))}></input>\r\n                </div>\r\n            </div>\r\n            <div className=\"new-game__buttons\">\r\n                <button className=\"button--blue\" onClick={() => dispatch(startGame('9R'))}>Start 9-Rounder</button>\r\n                <button className=\"button--blue\" onClick={() => dispatch(startGame('15R'))}>Start 15-Rounder</button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default NewGame;\r\n","import { useRef, useEffect } from \"react\";\r\n\r\nexport default function useEventListener<T extends Event>(eventName: string, handler: (event: T) => void) {\r\n\r\n    const savedHandler = useRef(handler);\r\n    useEffect(() => {\r\n        savedHandler.current = handler\r\n    }, [handler]);\r\n\r\n    useEffect(() => {\r\n        const eventListener = (event: Event) => savedHandler.current(event as T);\r\n        window.addEventListener(eventName, eventListener);\r\n        return () => window.removeEventListener(eventName, eventListener);\r\n    }, [eventName]);\r\n}\r\n","import React from 'react';\r\nimport './BetweenRounds.css';\r\nimport { CountdownGame } from '../../game/game';\r\nimport { CountdownAction, startLettersRound, startNumbersRound, startConundrumRound } from '../../game/actions';\r\nimport { getP1TotalScore, getP2TotalScore, getNextRoundDescription, RoundDescription } from '../../game/selectors';\r\nimport useEventListener from '../../hooks/useEventListener';\r\n\r\nexport interface BetweenRoundsProps {\r\n    game: CountdownGame;\r\n    dispatch: (_: CountdownAction) => void;\r\n}\r\n\r\nconst BetweenRounds: React.FC<BetweenRoundsProps> = ({game, dispatch}) => {\r\n\r\n    const nextRoundDescription = getNextRoundDescription(game);\r\n\r\n    const startNextRound = () => {\r\n        switch (nextRoundDescription.type) {\r\n            case 'LETTERS': return dispatch(startLettersRound());\r\n            case 'NUMBERS': return dispatch(startNumbersRound());\r\n            case 'CONUNDRUM': return dispatch(startConundrumRound());\r\n        }\r\n    }\r\n\r\n    const handleKeyDown = (e: KeyboardEvent) => {\r\n        if (e.keyCode === 32) {\r\n            startNextRound();\r\n        }\r\n    }\r\n\r\n    useEventListener('keydown', handleKeyDown);\r\n\r\n    return (\r\n        <div className=\"between-rounds\">\r\n            <div className=\"game__score\">{game.p1Name} {getP1TotalScore(game)} - {getP2TotalScore(game)} {game.p2Name}</div>\r\n            <div className=\"game__round-description\">The next round will be: {roundSummary(nextRoundDescription)}</div>\r\n            <button className=\"button--blue\" onClick={() => startNextRound()}>Start next round</button>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst roundSummary = (description: RoundDescription) => {\r\n    switch (description.type) {\r\n        case 'LETTERS': return `Letters picked by ${description.picker}`;\r\n        case 'NUMBERS': return `Numbers picked by ${description.picker}`;\r\n        case 'CONUNDRUM': return `Conundrum`;\r\n    }\r\n}\r\n\r\nexport default BetweenRounds;\r\n","// eslint-disable-next-line import/no-webpack-loader-syntax\r\nimport lettersWorker from 'workerize-loader!../workers/letters.worker';\r\nimport _words from '../data/words.json';\r\nconst words = _words.words;\r\n\r\nexport const checkValidity = (word: string): boolean => {\r\n    let [lo, hi] = [0, words.length - 1];\r\n    while (lo <= hi) {\r\n        const mid = Math.floor((lo + hi) / 2);\r\n        if (words[mid] === word) return true;\r\n        else if (words[mid] < word) lo = mid + 1;\r\n        else if (words[mid] > word) hi = mid - 1;\r\n    }\r\n    return false;\r\n}\r\n\r\nexport const findAllWordsFromSelection = (selection: string[], onWordFound: (_: string) => void): (() => void) => {\r\n    const worker = lettersWorker();\r\n    worker.addEventListener('message', (message: any) => {\r\n        if (message.data.type === 'WORD') {\r\n            onWordFound(message.data.value);\r\n        }\r\n    });\r\n    worker.findWordsFromSelection(selection);\r\n    return () => worker.terminate();\r\n}\r\n","import { useState } from 'react';\r\n\r\nimport { checkValidity } from '../solvers/lettersSolver';\r\n\r\nexport default function useLettersDeclarations(selection: string[], _declaration: string = '') {\r\n    const [declaration, _setDeclaration] = useState(_declaration);\r\n    const [score, setScore] = useState(0);\r\n\r\n    const setDeclaration = (word: string) => {\r\n        const isValid = isContainedInSelection(word, selection) && checkValidity(word);\r\n        _setDeclaration(word);\r\n        setScore(isValid ? (word.length === 9 ? 18 : word.length) : 0);\r\n    };\r\n\r\n    return { declaration, setDeclaration, score };\r\n}\r\n\r\nconst isContainedInSelection = (word: string, selection: string[]): boolean => {\r\n    const selectionCounts = letterCounts(selection);\r\n    const declarationCounts = letterCounts([...word]);\r\n    return Object.keys(declarationCounts).every(c => selectionCounts[c] && selectionCounts[c] >= declarationCounts[c]);\r\n}\r\n\r\nconst letterCounts = (selection: string[]): {[s: string]: number} => {\r\n    const counts: {[s: string]: number} = {};\r\n    for (const letter of selection) counts[letter] = (counts[letter] || 0) + 1;\r\n    return counts;\r\n}\r\n","import { useState, useEffect } from 'react';\r\nimport { findAllWordsFromSelection } from '../solvers/lettersSolver';\r\n\r\nexport default function useLettersSolution(selection: string[]) {\r\n\r\n    const [validWords, setValidWords] = useState<string[]>([]);\r\n    const [maxLength, setMaxLength] = useState(0);\r\n    const maxes = validWords.filter(w => w.length === maxLength).filter((word, idx, arr) => arr.indexOf(word) === idx);\r\n\r\n    const addWord = (word: string) => {\r\n        setValidWords(words => [...words, word]);\r\n        setMaxLength(ml => Math.max(ml, word.length));\r\n    };\r\n\r\n    useEffect(() => {\r\n        return findAllWordsFromSelection(selection, addWord);\r\n    }, [selection]);\r\n\r\n    return maxes;\r\n}\r\n","import { useState } from 'react';\r\n\r\nimport useInterval from './useInterval';\r\n\r\nexport default function useTimer(seconds: number, onExpire?: () => void) {\r\n\r\n    const [timeRemaining, setTimeRemaining] = useState(seconds);\r\n    const [isRunning, setIsRunning] = useState(false);\r\n    const [isExpired, setIsExpired] = useState(false);\r\n\r\n    useInterval(() => {\r\n        if (timeRemaining > 0) {\r\n            setTimeRemaining(time => Math.max(0, time - 0.02));\r\n        } else {\r\n            setIsRunning(false);\r\n            setIsExpired(true);\r\n            if (onExpire) onExpire();\r\n        }\r\n    }, isRunning ? 20 : null);\r\n\r\n    const startTimer = () => {\r\n        setTimeRemaining(seconds);\r\n        setIsRunning(true);\r\n    };\r\n\r\n    const resumeTimer = () => {\r\n        setIsRunning(true);\r\n    };\r\n\r\n    const stopTimer = () => {\r\n        setIsRunning(false);\r\n    };\r\n\r\n    const expireTimer = () => {\r\n        setIsExpired(true);\r\n    }\r\n\r\n    return { startTimer, resumeTimer, stopTimer, expireTimer, timeRemaining, isRunning, isExpired };\r\n}\r\n","import { useEffect, useRef } from 'react';\r\n\r\nexport default function useInterval(callback: () => void, delay: number | null) {\r\n\r\n    const savedCallback = useRef<() => void>();\r\n\r\n    useEffect(() => {\r\n        savedCallback.current = callback;\r\n    }, [callback]);\r\n\r\n    useEffect(() => {\r\n        if (delay !== null) {\r\n            let id = setInterval(() => savedCallback.current && savedCallback.current(), delay);\r\n            return () => clearInterval(id);\r\n        }\r\n    }, [delay]);\r\n}\r\n","import React from 'react';\r\nimport './Timer.css';\r\n\r\nexport interface TimerProps {\r\n    durationSeconds: number;\r\n    secondsRemaining: number;\r\n}\r\n\r\nconst Timer: React.FC<TimerProps> = ({ secondsRemaining, durationSeconds }) => {\r\n    return (\r\n        <div className=\"timer\">\r\n            <div className=\"timer__progress\" style={progressBarStyle(secondsRemaining, durationSeconds)}></div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst progressBarStyle = (remaining: number, duration: number) => ({\r\n    width: `${100 * remaining / duration}%`\r\n});\r\n\r\nexport default Timer;\r\n","import React, { useState } from 'react';\r\nimport './LettersRound.css';\r\n\r\nimport useSound from 'use-sound';\r\nimport countdownTheme from '../../media/countdown.mp3';\r\n\r\nimport { getCurrentRoundDescription, getCurrentRound, getP1TotalScore, getP2TotalScore } from '../../game/selectors';\r\nimport { CountdownGame, LettersRound } from '../../game/game';\r\nimport { CountdownAction, drawConsonant, drawVowel, setLettersRoundResult, endRound } from '../../game/actions';\r\nimport Selection from '../Selection/Selection';\r\nimport useLettersDeclarations from '../../hooks/useLettersDeclaration';\r\nimport useLettersSolution from '../../hooks/useLettersSolution';\r\nimport useTimer from '../../hooks/useTimer';\r\nimport Timer from '../Timer/Timer';\r\nimport useEventListener from '../../hooks/useEventListener';\r\n\r\nexport interface LettersRoundProps {\r\n    game: CountdownGame;\r\n    dispatch: (_: CountdownAction) => void;\r\n}\r\n\r\nconst LettersRoundComponent: React.FC<LettersRoundProps> = ({game, dispatch}) => {\r\n\r\n    const roundDescription = getCurrentRoundDescription(game);\r\n    const selection = (getCurrentRound(game) as LettersRound).selection;\r\n    const [declarationsSubmitted, setDeclarationsSubmitted] = useState(false);\r\n\r\n    const {startTimer, timeRemaining, isRunning, isExpired} = useTimer(30);\r\n    const [startSound] = useSound(countdownTheme);\r\n\r\n    const maxes = useLettersSolution(selection);\r\n    const { declaration: p1Declaration, setDeclaration: setP1Declaration, score: p1Score } = useLettersDeclarations(selection);\r\n    const { declaration: p2Declaration, setDeclaration: setP2Declaration, score: p2Score } = useLettersDeclarations(selection);\r\n    const submitText = declarationsSubmitted ? 'Resubmit' : 'Submit';\r\n    const submitDeclarations = () => {\r\n        dispatch(setLettersRoundResult(p1Declaration, p2Declaration, p1Score, p2Score, maxes));\r\n        setDeclarationsSubmitted(true);\r\n    };\r\n\r\n    const pickConsonant = () => {\r\n        if (selection.length < 9 && countConsonants(selection) < 6) {\r\n            dispatch(drawConsonant());\r\n        }\r\n    };\r\n\r\n    const pickVowel = () => {\r\n        if (selection.length < 9 && countVowels(selection) < 5) {\r\n            dispatch(drawVowel());\r\n        }\r\n    };\r\n\r\n    const startRound = () => {\r\n        startTimer();\r\n        startSound({});\r\n    };\r\n\r\n    const handleKeydown = (e: KeyboardEvent) => {\r\n        if (e.repeat) return;\r\n        if (e.keyCode === 67) pickConsonant();\r\n        if (e.keyCode === 86) pickVowel();\r\n        if (e.keyCode === 32) {\r\n            if (!isRunning && !isExpired && selection.length === 9) startRound();\r\n            else if (isExpired && declarationsSubmitted) dispatch(endRound());\r\n        }\r\n        if (e.keyCode === 13) {\r\n            if (isExpired) submitDeclarations();\r\n        }\r\n    }\r\n\r\n    useEventListener('keydown', handleKeydown);\r\n\r\n    return (\r\n        <div className=\"letters-round\">\r\n            <div className=\"game__score\">{game.p1Name} {getP1TotalScore(game)} - {getP2TotalScore(game)} {game.p2Name}</div>\r\n            <div className=\"game__round-description\">Letters picked by {roundDescription.picker}</div>\r\n            <div className=\"game__selection\">\r\n                <Selection selection={extendSelection(selection)}></Selection>\r\n            </div>\r\n            {selection.length < 9 && <div className=\"letters-round__pick-actions\">\r\n                <button className=\"button--grey letters-round__pick\" disabled={countConsonants(selection) >= 6} onClick={pickConsonant}>Consonant (C)</button>\r\n                <button className=\"button--grey letters-round__pick\" disabled={countVowels(selection) >= 5} onClick={pickVowel}>Vowel (V)</button>\r\n            </div>}\r\n            {!isExpired && selection.length === 9 && <div className=\"letters-round__timer game__full-width\">\r\n                <Timer durationSeconds={30} secondsRemaining={timeRemaining}></Timer>\r\n                {!isRunning && !isExpired && <button className=\"button--green\" onClick={startRound}>Start the clock</button>}\r\n            </div>}\r\n            {isExpired && <div className=\"letters-round__declarations game__full-width\">\r\n                <div className=\"letters-round__inputs\">\r\n                    <div className=\"letters-round__declaration\">\r\n                        <div className=\"letters-round__name\">{game.p1Name}</div>\r\n                        <input type=\"text\" value={p1Declaration} onChange={e => setP1Declaration(e.target.value.toUpperCase().trim())}></input>\r\n                    </div>\r\n                    <div className=\"letters-round__declaration\">\r\n                        <div className=\"letters-round__name\">{game.p2Name}</div>\r\n                        <input type=\"text\" value={p2Declaration} onChange={e => setP2Declaration(e.target.value.toUpperCase().trim())}></input>\r\n                    </div>\r\n                </div>\r\n                <button className=\"letters-round__submit button--green\" onClick={() => submitDeclarations()}>{submitText}</button>\r\n            </div>}\r\n            {isExpired && declarationsSubmitted && <div className=\"letters-round__results-preview\">\r\n                <div className=\"letters-round__validity game__full-width\">\r\n                    <span>{p1Score > 0 ? 'Valid' : 'Invalid'}</span>\r\n                    <span>{p2Score > 0 ? 'Valid' : 'Invalid'}</span>\r\n                </div>\r\n                <div className=\"letters-round__maxes\">Best was: {maxes.join(', ')}</div>\r\n                <button className=\"letters-round__end button--blue\" onClick={() => dispatch(endRound())}>End round</button>\r\n            </div>}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default LettersRoundComponent;\r\n\r\nconst isVowel = (letter: string): boolean => letter === 'A' || letter === 'E' || letter === 'I' || letter === 'O' || letter === 'U';\r\n\r\nconst countConsonants = (selection: string[]) => selection.filter(c => !isVowel(c)).length;\r\n\r\nconst countVowels = (selection: string[]) => selection.filter(c => isVowel(c)).length;\r\n\r\nconst extendSelection = (selection: string[]): string[] => {\r\n    const extended = [...selection];\r\n    while (extended.length < 9) {\r\n        extended.push('');\r\n    }\r\n    return extended;\r\n}\r\n","import { useState } from 'react';\r\n\r\nexport default function useNumbersDeclarations(target: number) {\r\n\r\n    const [declaration, _setDeclaration] = useState(0);\r\n    const [valid, _setValid] = useState(true);\r\n    const [score, setScore] = useState(0);\r\n\r\n    const setDeclaration = (value: number) => {\r\n        _setDeclaration(value);\r\n        setScore(valid ? scoreForDeclaration(value, target) : 0);\r\n    };\r\n\r\n    const setValid = (value: boolean) => {\r\n        _setValid(value);\r\n        setScore(value ? scoreForDeclaration(declaration, target): 0);\r\n    };\r\n\r\n    return { declaration, setDeclaration, valid, setValid, score };\r\n}\r\n\r\nconst scoreForDeclaration = (value: number, target: number): number => {\r\n    if (value === target) return 10;\r\n    if (value >= target - 5 && value <= target + 5) return 7;\r\n    if (value >= target - 10 && value <= target + 10) return 5;\r\n    return 0;\r\n};\r\n","import { useState, useRef, useEffect } from 'react';\r\nimport { CountdownAction, drawSmall, drawLarge, setTarget } from '../game/actions';\r\n\r\nexport default function useNumbersSelection(_dispatch: (_: CountdownAction) => void) {\r\n\r\n    const [selectedLarges, _setSelectedLarges] = useState<number | undefined>(undefined);\r\n    const selectionHasBeenMade = selectedLarges !== undefined;\r\n\r\n    const dispatch = useRef(_dispatch);\r\n\r\n    useEffect(() => {\r\n        dispatch.current = _dispatch;\r\n    }, [_dispatch]);\r\n\r\n    const setSelectedLarges = (larges: number) => {\r\n        _setSelectedLarges(larges);\r\n        for (let i = 0; i < 6 - larges; ++i) {\r\n            setTimeout(() => dispatch.current(drawSmall()), 750 * (i + 1));\r\n        }\r\n        for (let i = 6 - larges; i < 6; ++i) {\r\n            setTimeout(() => dispatch.current(drawLarge()), 750 * (i + 1));\r\n        }\r\n        setTimeout(() => dispatch.current(setTarget()), 750 * 7);\r\n    };\r\n\r\n    return {selectionHasBeenMade, setSelectedLarges};\r\n}\r\n","import { useState, useEffect } from 'react';\r\nimport { findNumbersMethods } from '../solvers/numbersSolver';\r\n\r\nexport default function useNumbersSolution(selection: number[], target: number) {\r\n\r\n    const [max, setMax] = useState<{value: number, method: string}>({value: 0, method: ''});\r\n    const addSolution = (value: number, method: string) => setMax({value, method});\r\n\r\n    useEffect(() => {\r\n        if (target !== undefined) {\r\n            return findNumbersMethods(selection, target, addSolution);\r\n        }\r\n    }, [selection, target]);\r\n\r\n    return max;\r\n}\r\n","// eslint-disable-next-line import/no-webpack-loader-syntax\r\nimport numbersWorker from 'workerize-loader!../workers/numbers.worker';\r\n\r\nexport const findNumbersMethods = (numbers: number[], target: number, onMethodFound: (value: number, method: string) => void): (() => void) => {\r\n    const worker = numbersWorker();\r\n    worker.addEventListener('message', (message: any) => {\r\n        if (message.data.type === 'METHOD') {\r\n            onMethodFound(message.data.value, message.data.method);\r\n        }\r\n    });\r\n    worker.findNumbersMethods(numbers, target);\r\n    return () => worker.terminate();\r\n}\r\n","import React, { useState, KeyboardEvent as KEvent } from 'react';\r\nimport './NumbersRound.css';\r\n\r\nimport useSound from 'use-sound';\r\nimport countdownTheme from '../../media/countdown.mp3';\r\n\r\nimport { getCurrentRoundDescription, getCurrentRound, getP1TotalScore, getP2TotalScore } from '../../game/selectors';\r\nimport { CountdownGame, NumbersRound } from '../../game/game';\r\nimport { CountdownAction, endRound, setNumbersRoundResult } from '../../game/actions';\r\nimport Selection from '../Selection/Selection';\r\nimport useNumbersDeclarations from '../../hooks/useNumbersDeclaration';\r\nimport useNumbersSelection from '../../hooks/useNumbersSelection';\r\nimport useNumbersSolution from '../../hooks/useNumbersSolution';\r\nimport useTimer from '../../hooks/useTimer';\r\nimport Timer from '../Timer/Timer';\r\nimport useEventListener from '../../hooks/useEventListener';\r\n\r\nexport interface NumbersRoundProps {\r\n    game: CountdownGame;\r\n    dispatch: (_: CountdownAction) => void;\r\n}\r\n\r\nconst NumbersRoundComponent: React.FC<NumbersRoundProps> = ({game, dispatch}) => {\r\n\r\n    const roundDescription = getCurrentRoundDescription(game);\r\n    const selection = (getCurrentRound(game) as NumbersRound).selection;\r\n    const target = (getCurrentRound(game) as NumbersRound).target;\r\n    const [declarationsSubmitted, setDeclarationsSubmitted] = useState(false);\r\n\r\n    const {startTimer, timeRemaining, isRunning, isExpired} = useTimer(30);\r\n    const [startSound] = useSound(countdownTheme);\r\n\r\n    const {selectionHasBeenMade, setSelectedLarges} = useNumbersSelection(dispatch);\r\n\r\n    const max = useNumbersSolution(selection, target);\r\n    const { declaration: p1Declaration, setDeclaration: setP1Declaration, valid: p1Valid, setValid: setP1Valid, score: p1Score } = useNumbersDeclarations(target);\r\n    const { declaration: p2Declaration, setDeclaration: setP2Declaration, valid: p2Valid, setValid: setP2Valid, score: p2Score } = useNumbersDeclarations(target);\r\n    const submitText = declarationsSubmitted ? 'Resubmit' : 'Submit';\r\n    const submitDeclarations = () => {\r\n        dispatch(setNumbersRoundResult(p1Declaration, p2Declaration, p1Score, p2Score, max));\r\n        setDeclarationsSubmitted(true);\r\n    };\r\n\r\n    const startRound = () => {\r\n        startTimer();\r\n        startSound({});\r\n    };\r\n\r\n    const makeSelection = (larges: number) => {\r\n        if (!selectionHasBeenMade && !target) {\r\n            setSelectedLarges(larges);\r\n        }\r\n    }\r\n\r\n    const handleKeydown = (e: KeyboardEvent) => {\r\n        if (e.repeat) return;\r\n        if (e.keyCode === 54) makeSelection(0);\r\n        if (e.keyCode >= 48 && e.keyCode <= 52) makeSelection(e.keyCode - 48);\r\n        if (e.keyCode === 32) {\r\n            if (!isRunning && !isExpired && !!target) startRound();\r\n            else if (declarationsSubmitted) dispatch(endRound());\r\n        }\r\n        if (e.keyCode === 13) {\r\n            if (isExpired) submitDeclarations();\r\n        }\r\n    }\r\n\r\n    const inputKeydown = (e: KEvent) => {\r\n        if (e.keyCode === 32) e.stopPropagation();\r\n    }\r\n\r\n    useEventListener('keydown', handleKeydown);\r\n\r\n    return (\r\n        <div className=\"numbers-round\">\r\n            <div className=\"game__score\">{game.p1Name} {getP1TotalScore(game)} - {getP2TotalScore(game)} {game.p2Name}</div>\r\n            <div className=\"game__round-description\">Numbers picked by {roundDescription.picker}</div>\r\n            <div className=\"numbers-round__target\">{target || '...'}</div>\r\n            <div className=\"game__selection\">\r\n                <Selection selection={extendSelection(selection)}></Selection>\r\n            </div>\r\n            {!selectionHasBeenMade && !target && <div className=\"numbers-round__pick-actions\">\r\n                <button className=\"button--grey\" onClick={() => makeSelection(0)}>6 small</button>\r\n                <button className=\"button--grey\" onClick={() => makeSelection(1)}>1 large</button>\r\n                <button className=\"button--grey\" onClick={() => makeSelection(2)}>2 large</button>\r\n                <button className=\"button--grey\" onClick={() => makeSelection(3)}>3 large</button>\r\n                <button className=\"button--grey\" onClick={() => makeSelection(4)}>4 large</button>\r\n            </div>}\r\n            {!!target && <div className=\"numbers-round__timer\">\r\n                <Timer durationSeconds={30} secondsRemaining={timeRemaining}></Timer>\r\n                {!isRunning && !isExpired && <button className=\"button--green\" onClick={startRound}>Start the clock</button>}\r\n            </div>}\r\n            {isExpired && <div className=\"numbers-round__declarations\">\r\n                <div className=\"numbers-round__inputs\">\r\n                    <div className=\"numbers-round__declaration\">\r\n                        <div className=\"numbers-round__name\">{game.p1Name}</div>\r\n                        <input tabIndex={1} type=\"number\" value={p1Declaration || undefined} onChange={e => setP1Declaration(+e.target.value)}></input>\r\n                        <div className=\"numbers-round__validity\">\r\n                            Valid?\r\n                            <input tabIndex={3} type=\"checkbox\" onKeyDown={inputKeydown} checked={p1Valid} onChange={e => setP1Valid(e.target.checked)}></input>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"numbers-round__declaration\">\r\n                        <div className=\"numbers-round__name\">{game.p2Name}</div>\r\n                        <input tabIndex={2} type=\"number\" value={p2Declaration || undefined} onChange={e => setP2Declaration(+e.target.value)}></input>\r\n                        <div className=\"numbers-round__validity\">\r\n                            Valid?\r\n                            <input tabIndex={4} type=\"checkbox\" onKeyDown={inputKeydown} checked={p2Valid} onChange={e => setP2Valid(e.target.checked)}></input>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <button className=\"numbers-round__submit button--green\" onClick={() => submitDeclarations()}>{submitText}</button>\r\n            </div>}\r\n            {declarationsSubmitted && <div className=\"numbers-round__results-preview\">\r\n                <div className=\"numbers-round__maxes\">Best was: {max.value} = {max.method}</div>\r\n                <button className=\"numbers-round__end button--blue\" onClick={() => dispatch(endRound())}>End round</button>\r\n            </div>}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default NumbersRoundComponent;\r\n\r\nconst extendSelection = (selection: number[]): string[] => {\r\n    const extended = [];\r\n    for (let i = 0; i < 6 - selection.length; ++i) {\r\n        extended.push('');\r\n    }\r\n    return [...extended, ...selection.map(n => n.toString())];\r\n}\r\n","import { useState, useEffect, useRef } from 'react';\r\nimport useSound from 'use-sound';\r\nimport countdownTheme from '../media/countdown.mp3';\r\nimport conundrums from '../data/conundrums.json';\r\nimport { CountdownAction, revealConundrum, setP1ConundrumDeclaration, setP2ConundrumDeclaration } from '../game/actions';\r\nimport useTimer from './useTimer';\r\n\r\nexport enum ConundrumRoundState {\r\n    WAITING,\r\n    TICKING,\r\n    GUESSING,\r\n    INCORRECT,\r\n    EXPIRED,\r\n    SOLVED,\r\n}\r\n\r\nexport default function useConundrum(initialState: ConundrumRoundState, _dispatch: (_: CountdownAction) => void, answer: string | undefined) {\r\n\r\n    const dispatch = useRef(_dispatch);\r\n    useEffect(() => {\r\n        dispatch.current = _dispatch\r\n    }, [_dispatch]);\r\n\r\n    const [roundState, setRoundState] = useState(initialState);\r\n\r\n    const {resumeTimer, stopTimer, expireTimer, timeRemaining, isRunning, isExpired} = useTimer(32, () => {\r\n        setRoundState(ConundrumRoundState.EXPIRED);\r\n    });\r\n    const [startSound, {pause: pauseSound}] = useSound(countdownTheme);\r\n\r\n    const [buzzTime, setBuzzTime] = useState<number | undefined>(undefined);\r\n    const [p1HasDeclared, setP1HasDeclared] = useState(false);\r\n    const [p2HasDeclared, setP2HasDeclared] = useState(false);\r\n\r\n    const startRound = () => {\r\n        const [scramble, answer] = randomConundrum();\r\n        dispatch.current(revealConundrum(scramble, answer));\r\n        resume();\r\n    };\r\n\r\n    const resume = () => {\r\n        startSound({});\r\n        resumeTimer();\r\n        setRoundState(ConundrumRoundState.TICKING);\r\n    };\r\n\r\n    const buzz = () => {\r\n        pauseSound();\r\n        stopTimer();\r\n        setBuzzTime(32 - timeRemaining);\r\n        setRoundState(ConundrumRoundState.GUESSING);\r\n    };\r\n\r\n    const incorrect = () => {\r\n        setRoundState(ConundrumRoundState.INCORRECT);\r\n    }\r\n\r\n    const expired = () => {\r\n        expireTimer();\r\n        setRoundState(ConundrumRoundState.EXPIRED);\r\n    }\r\n\r\n    const solved = () => {\r\n        expireTimer();\r\n        setRoundState(ConundrumRoundState.SOLVED);\r\n    }\r\n\r\n    const declareForP1 = (guess: string) => {\r\n        setP1HasDeclared(true);\r\n        dispatch.current(setP1ConundrumDeclaration(buzzTime as number, guess));\r\n        if (guess !== answer && !p2HasDeclared) incorrect();\r\n        else if (guess !== answer) expired();\r\n        else solved();\r\n    }\r\n\r\n    const declareForP2 = (guess: string) => {\r\n        setP2HasDeclared(true);\r\n        dispatch.current(setP2ConundrumDeclaration(buzzTime as number, guess));\r\n        if (guess !== answer && !p1HasDeclared) incorrect();\r\n        else if (guess !== answer) expired();\r\n        else solved();\r\n    }\r\n\r\n    return { roundState, startRound, buzz, resume, p1HasDeclared, declareForP1, p2HasDeclared, declareForP2, timeRemaining, isRunning, isExpired };\r\n}\r\n\r\nconst randomConundrum = (): [string, string] => {\r\n    const answer = pickRandomConundrumAnswer();\r\n    const shuffle = decentShuffle();\r\n    const scrambleLetters = shuffle.map(i => answer[i]);\r\n    return [scrambleLetters.join(''), answer];\r\n};\r\n\r\nconst pickRandomConundrumAnswer = (): string => {\r\n    const numberOfConundrums = conundrums.conundrums.length;\r\n    return conundrums.conundrums[Math.floor(numberOfConundrums * Math.random())];\r\n};\r\n\r\nconst decentShuffle = (): number[] => {\r\n    const shuffle = singleShuffle();\r\n    if (inversions(shuffle) >= 18) return shuffle;\r\n    return shuffle.reverse();\r\n};\r\n\r\nconst inversions = (shuffle: number[]): number => {\r\n    let inversions = 0;\r\n    for (let i = 0; i < shuffle.length; ++i) {\r\n        for (let j = 0; j < shuffle.length; ++j) {\r\n            if (shuffle[i] > shuffle[j]) ++inversions;\r\n        }\r\n    }\r\n    return inversions;\r\n};\r\n\r\nconst singleShuffle = () => {\r\n    const items = [...Array(9)].map((_, idx) => idx);\r\n    for (let i = items.length - 1; i > 0; --i) {\r\n        const j = Math.floor(Math.random() * (i + 1));\r\n        [items[i], items[j]] = [items[j], items[i]];\r\n    }\r\n    return items;\r\n};\r\n","import React, { useState, KeyboardEvent as KEvent } from 'react';\r\nimport './ConundrumRound.css';\r\n\r\nimport { CountdownGame, ConundrumRound } from '../../game/game';\r\nimport { CountdownAction, solveConundrum, endRound } from '../../game/actions';\r\nimport { getCurrentRound, getP1TotalScore, getP2TotalScore } from '../../game/selectors';\r\nimport useConundrum, { ConundrumRoundState } from '../../hooks/useConundrum';\r\nimport Selection from '../Selection/Selection';\r\nimport Timer from '../Timer/Timer';\r\nimport useEventListener from '../../hooks/useEventListener';\r\n\r\nexport interface ConundrumRoundProps {\r\n    game: CountdownGame;\r\n    dispatch: (_: CountdownAction) => void;\r\n}\r\n\r\nconst ConundrumRoundComponent: React.FC<ConundrumRoundProps> = ({game, dispatch}) => {\r\n\r\n    const round = getCurrentRound(game) as ConundrumRound;\r\n\r\n    const [p1Declaration, setP1Declaration] = useState('');\r\n    const [p2Declaration, setP2Declaration] = useState('');\r\n\r\n    const initialRoundState = () => {\r\n        if (round.solved) return ConundrumRoundState.SOLVED;\r\n        else return ConundrumRoundState.WAITING;\r\n    };\r\n    const { roundState, startRound, buzz, resume, p1HasDeclared, declareForP1, p2HasDeclared, declareForP2, timeRemaining } = useConundrum(initialRoundState(), dispatch, round.answer);\r\n\r\n    const selectionToShow = () => {\r\n        if (roundState === ConundrumRoundState.WAITING || roundState === ConundrumRoundState.GUESSING) return emptySelection();\r\n        else if (roundState === ConundrumRoundState.INCORRECT) return incorrectSelection();\r\n        else if (roundState === ConundrumRoundState.EXPIRED && !round.solved && p1HasDeclared && p2HasDeclared) return incorrectSelection();\r\n        else return getSelection(round);\r\n    };\r\n\r\n    const showBuzzer = roundState === ConundrumRoundState.TICKING && !round.solved && (!p1HasDeclared || !p2HasDeclared);\r\n    const showReveal = roundState === ConundrumRoundState.EXPIRED && !round.solved;\r\n\r\n    const handleKeyDown = (e: KeyboardEvent) => {\r\n        if (e.keyCode === 32) {\r\n            if (roundState === ConundrumRoundState.WAITING) startRound();\r\n            else if (roundState === ConundrumRoundState.INCORRECT) resume();\r\n            else if (showBuzzer) buzz();\r\n            else if (showReveal) dispatch(solveConundrum());\r\n            else if (round.solved) dispatch(endRound());\r\n        }\r\n    }\r\n\r\n    const handleP1KeyDown = (e: KEvent) => {\r\n        if (e.keyCode === 13) {\r\n            declareForP1(p1Declaration);\r\n        }\r\n        e.stopPropagation();\r\n    }\r\n\r\n    const handleP2KeyDown = (e: KEvent) => {\r\n        if (e.keyCode === 13) {\r\n            declareForP2(p2Declaration);\r\n        }\r\n        e.stopPropagation();\r\n    }\r\n\r\n    useEventListener('keydown', handleKeyDown);\r\n\r\n    return (\r\n        <div className=\"conundrum-round\">\r\n            <div className=\"game__score\">{game.p1Name} {getP1TotalScore(game)} - {getP2TotalScore(game)} {game.p2Name}</div>\r\n            <div className=\"game__round-description\">Conundrum</div>\r\n            <div className=\"game__selection\">\r\n                <Selection selection={selectionToShow()}></Selection>\r\n            </div>\r\n            <div className=\"conundrum-round__timer\">\r\n                <Timer durationSeconds={30} secondsRemaining={Math.max(0, timeRemaining - 2)}></Timer>\r\n            </div>\r\n            {roundState === ConundrumRoundState.WAITING && <div className=\"conundrum-round__pick-actions\">\r\n                <button className=\"button--green\" onClick={startRound}>Reveal conundrum</button>\r\n            </div>}\r\n            {showBuzzer && <div className=\"conundrum-round__buzzer\">\r\n                <button className=\"button--red conundrum-round__buzz\" onClick={() => buzz()}>Buzz!</button>\r\n            </div>}\r\n            {roundState === ConundrumRoundState.INCORRECT && <div className=\"conundrum-round__resume\">\r\n                <button className=\"button--green conundrum-round__resume\" onClick={() => resume()}>Resume</button>\r\n            </div>}\r\n            {roundState === ConundrumRoundState.GUESSING && <div className=\"conundrum-round__declarations\">\r\n                <div className=\"conundrum-round__declaration\">\r\n                    <div className=\"conundrum-round__name\">{game.p1Name}</div>\r\n                    <input disabled={p1HasDeclared} type=\"text\" value={p1Declaration} onKeyDown={e => handleP1KeyDown(e)} onChange={e => setP1Declaration(e.target.value.toUpperCase())}></input>\r\n                    <button className=\"button--green\" disabled={p1HasDeclared} onClick={() => declareForP1(p1Declaration)}>Submit</button>\r\n                </div>\r\n                <div className=\"conundrum-round__declaration\">\r\n                    <div className=\"conundrum-round__name\">{game.p2Name}</div>\r\n                    <input disabled={p2HasDeclared} type=\"text\" value={p2Declaration} onKeyDown={e => handleP2KeyDown(e)} onChange={e => setP2Declaration(e.target.value.toUpperCase())}></input>\r\n                    <button className=\"button--green\" disabled={p2HasDeclared} onClick={() => declareForP2(p2Declaration)}>Submit</button>\r\n                </div>\r\n            </div>}\r\n            {showReveal && <div className=\"conundrum-round__solve-button\">\r\n                <button className=\"button--green\" onClick={() => dispatch(solveConundrum())}>Reveal answer</button>\r\n            </div>}\r\n            {(roundState === ConundrumRoundState.SOLVED || roundState === ConundrumRoundState.EXPIRED) && round.solved && <div className=\"conundrum-round__results\">\r\n                {round.p1Score > 0 && <span>Solved by {game.p1Name}!</span>}\r\n                {round.p2Score > 0 && <span>Solved by {game.p2Name}!</span>}\r\n                {round.p1Score === 0 && round.p2Score === 0 && <span>No-one solved it!</span>}\r\n                <button className=\"button--blue\" onClick={() => dispatch(endRound())}>End round</button>\r\n            </div>}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ConundrumRoundComponent;\r\n\r\nconst emptySelection = () => ['', '', '', '', '', '', '', '', ''];\r\n\r\nconst incorrectSelection = () => ['I', 'N', 'C', 'O', 'R', 'R', 'E', 'C', 'T'];\r\n\r\nconst getSelection = (round: ConundrumRound) => {\r\n    if (round.scramble === undefined) return emptySelection();\r\n    else if (!round.solved) return [...round.scramble];\r\n    else return [...round.answer];\r\n};\r\n","import React from 'react';\r\nimport './Recap.css';\r\n\r\nimport { CountdownGame, Round, LettersRound, NumbersRound, ConundrumRound } from '../../game/game';\r\nimport { getP1CumulativeScore, getP2CumulativeScore, getMaxCumulativeScore } from '../../game/selectors';\r\n\r\nexport interface RecapProps {\r\n    game: CountdownGame;\r\n}\r\n\r\nconst Recap: React.FC<RecapProps> = ({ game }) => {\r\n\r\n    const renderHeader = () => <tr>\r\n        <td>Round</td>\r\n        <td>Selection</td>\r\n        <td>{game.p1Name}</td>\r\n        <td>Score</td>\r\n        <td>{game.p2Name}</td>\r\n        <td>Best</td>\r\n        <td>Max Score</td>\r\n    </tr>;\r\n\r\n    const renderLettersRow = (round: LettersRound, index: number) => <tr key={index}>\r\n        <td>{index + 1}</td>\r\n        <td>{round.selection.join(' ')}</td>\r\n        <td className={round.p1Score > 0 ? '' : 'invalid'}>{round.p1Declaration}</td>\r\n        <td>{getP1CumulativeScore(game, index)} - {getP2CumulativeScore(game, index)}</td>\r\n        <td className={round.p2Score > 0 ? '' : 'invalid'}>{round.p2Declaration}</td>\r\n        <td title={round.maxes.join(', ')} className={round.maxes.length > 1 ? 'more-maxes' : ''}>{round.maxes[0]}</td>\r\n        <td>{getMaxCumulativeScore(game, index)}</td>\r\n    </tr>;\r\n\r\n    const renderNumbersRow = (round: NumbersRound, index: number) => <tr key={index}>\r\n        <td className=\"recap__round-number\">{index + 1}</td>\r\n        <td className=\"recap__numbers-selection\">{round.selection.join(' ')}</td>\r\n        <td className={round.p1Score > 0 ? '' : 'invalid'}>{round.p1Declaration}</td>\r\n        <td className=\"recap__score\">{getP1CumulativeScore(game, index)} - {getP2CumulativeScore(game, index)}</td>\r\n        <td className={round.p2Score > 0 ? '' : 'invalid'}>{round.p2Declaration}</td>\r\n        <td title={`${round.max.value} = ${round.max.method}`}>{round.max.value}</td>\r\n        <td>{getMaxCumulativeScore(game, index)}</td>\r\n    </tr>;\r\n\r\n    const renderConundrumRow = (round: ConundrumRound, index: number) => <tr key={index}>\r\n        <td className=\"recap__round-number\">{index + 1}</td>\r\n        <td className=\"recap__conundrum-selection\">{[...round.scramble].join(' ')}</td>\r\n        <td>\r\n            <div className={round.p1Score > 0 || !round.p1Declaration ? '' : 'invalid'}>{round.p1Declaration}</div>\r\n            {!!round.p1BuzzTime && <div>{normalizeBuzzTime(round.p1BuzzTime)} seconds</div>}\r\n        </td>\r\n        <td className=\"recap__score\">{getP1CumulativeScore(game, index)} - {getP2CumulativeScore(game, index)}</td>\r\n        <td>\r\n            <div className={round.p2Score > 0 || !round.p2Declaration ? '' : 'invalid'}>{round.p2Declaration}</div>\r\n            {!!round.p2BuzzTime && <div>{normalizeBuzzTime(round.p2BuzzTime)} seconds</div>}\r\n        </td>\r\n        <td>{round.p1Score === 0 && round.p2Score === 0 ? round.answer : ''}</td>\r\n        <td>{getMaxCumulativeScore(game, index)}</td>\r\n    </tr>;\r\n\r\n    const renderRoundRow = (round: Round, index: number) => {\r\n        switch (round.type) {\r\n            case 'LETTERS': return renderLettersRow(round, index);\r\n            case 'NUMBERS': return renderNumbersRow(round, index);\r\n            case 'CONUNDRUM': return renderConundrumRow(round, index);\r\n        }\r\n    };\r\n\r\n    const normalizeBuzzTime = (buzzTime: number) => {\r\n        let roundedBuzzTime = (Math.round(buzzTime * 4) / 4);\r\n        let adjustedBuzzTime = Math.min(30, Math.max(0.25, roundedBuzzTime - 0.5));\r\n        return adjustedBuzzTime.toFixed(2);\r\n    }\r\n\r\n    return (\r\n        <div className=\"recap\">\r\n            <table>\r\n                <thead>\r\n                    {renderHeader()}\r\n                </thead>\r\n                <tbody>\r\n                    {game.rounds.map((rd, idx) => renderRoundRow(rd, idx))}\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Recap;\r\n","import React from 'react';\r\nimport './GameOver.css';\r\n\r\nimport { CountdownGame } from '../../game/game';\r\nimport { CountdownAction, createNewGame } from '../../game/actions';\r\nimport { getP1TotalScore, getP2TotalScore } from '../../game/selectors';\r\nimport Selection from '../Selection/Selection';\r\nimport Recap from '../Recap/Recap';\r\n\r\nexport interface GameOverProps {\r\n    game: CountdownGame;\r\n    dispatch: (_: CountdownAction) => void;\r\n}\r\n\r\nconst GameOver: React.FC<GameOverProps> = ({game, dispatch}) => {\r\n    return (\r\n        <div className=\"game-over\">\r\n            <div className=\"game__selection\">\r\n                <Selection selection={['G', 'A', 'M', 'E', ' ', 'O', 'V', 'E', 'R']}></Selection>\r\n            </div>\r\n            <div className=\"game__score\">{game.p1Name} {getP1TotalScore(game)} - {getP2TotalScore(game)} {game.p2Name}</div>\r\n            <div className=\"game__recap\">\r\n                <Recap game={game}></Recap>\r\n            </div>\r\n            <button className=\"button--blue\" onClick={() => dispatch(createNewGame())}>Start New Game</button>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default GameOver;\r\n","import React from 'react';\nimport './App.css';\n\nimport useCountdownGame from '../hooks/useCountdownGame';\nimport { getGameState } from '../game/selectors';\n\nimport NewGame from '../components/NewGame/NewGame';\nimport BetweenRounds from '../components/BetweenRounds/BetweenRounds';\nimport LettersRound from '../components/LettersRound/LettersRound';\nimport NumbersRound from '../components/NumbersRound/NumbersRound';\nimport ConundrumRound from '../components/ConundrumRound/ConundrumRound';\nimport GameOver from '../components/GameOver/GameOver';\n\nfunction App() {\n\n    const [game, dispatch] = useCountdownGame();\n    const gameState = getGameState(game);\n\n    return (\n        <div className=\"app\">\n            {gameState === 'WAITING' && <NewGame game={game} dispatch={dispatch}></NewGame>}\n            {gameState === 'BETWEEN' && <BetweenRounds game={game} dispatch={dispatch}></BetweenRounds>}\n            {gameState === 'LETTERS' && <LettersRound game={game} dispatch={dispatch}></LettersRound>}\n            {gameState === 'NUMBERS' && <NumbersRound game={game} dispatch={dispatch}></NumbersRound>}\n            {gameState === 'CONUNDRUM' && <ConundrumRound game={game} dispatch={dispatch}></ConundrumRound>}\n            {gameState === 'ENDED' && <GameOver game={game} dispatch={dispatch}></GameOver>}\n        </div>\n    );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './app/App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}